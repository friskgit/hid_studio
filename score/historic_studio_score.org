#+name: Historic Studio Score
#+author: Henrik Frisk

* related files
* main music function
:PROPERTIES:
:header-args: :noweb yes
:END:

Method:

Use the [[main_funct][main_funct]] as a bolier plate. Generate the music file. Before exporting it to the score tangle the lilypond file and run it with (obviously substituting the file name with the name of the file generated by the script):

#+begin_src shell
  lilypond --svg score_excerpt.ly
#+end_src


#+name: stuff
#+begin_src lilypond
  \version "2.24"
  \include "ekme-heji.ily"

  #(define-markup-command (mysans layout props m) (markup?)
    (interpret-markup layout props
     #{ \markup \box \sans \small #m #}))

  #(define-markup-command (nobox layout props m) (markup?)
    (interpret-markup layout props
     #{ \markup \sans \tiny #m #}))

  \header {
    title = ""
    tagline = ##f
  }

#+end_src

#+name: main_funct
#+begin_src lilypond :tangle ./output/score_excerpt_2.ly :file output/score_excerpt_2.png
  \score {
    \new Staff \with {
      \omit BarLine
      \omit TimeSignature
    }
    \music
    \layout{}
  }
#+end_src

#+name: main_funct_two_staffs
#+begin_src lilypond :tangle ./output/score_excerpt_2.ly :file output/score_excerpt_2.png
  \score {
    <<
      \new Staff \with {
        \omit BarLine
        \omit TimeSignature
      }
      \music
      \new DrumStaff \with {
%        \remove Bar_engraver
        drumStyleTable = #percussion-style
        \override StaffSymbol.line-count = #1
      } \drummode {
  				%      \tempo 4 = 78
        \clef percussion 
        \perc-music
      }
    >>
    \layout{}
  }
#+end_src

#+name: main_funct_single_drum
#+begin_src lilypond :tangle ./output/score_excerpt_2.ly :file output/score_excerpt_2.png
  \score {
    <<
      \new DrumStaff \with {
%        \remove Bar_engraver
        drumStyleTable = #percussion-style
        \override StaffSymbol.line-count = #1
      } \drummode {
  				%      \tempo 4 = 78
        \clef percussion 
        \perc-music
      }
    >>
    \layout{}
  }
#+end_src


** segment A
:PROPERTIES:
:header-args: :noweb yes
:END:
#+name: drum_funct
#+begin_src lilypond :file output/beatingA.png :tangle output/intro.ly
  <<stuff>>
    <<one_to_six>>
    <<two_to_fifteen>>  
     <<one_to_eleven>>
      <<four_to_twentyf>>
      <<three_to_sixteen>>
       <<one_to_ten>>    

        #(set-default-paper-size "a3" 'landscape)
        
        \score {
  	<< \new StaffGroup <<
  	  \new DrumStaff \with {
  				% \remove Bar_engraver
  	    drumStyleTable = #percussion-style
  	    \override StaffSymbol.line-count = #1
  	  } \drummode {
  	    \tempo 4 = 78
  	    \clef percussion 
  	    \bar ".|:" \one-to-six \bar ":|."
  	  }
  	  \new DrumStaff \with {
  				% \remove Bar_engraver
  	    drumStyleTable = #percussion-style
  	    \override StaffSymbol.line-count = #1
  	  } \drummode {
  	    \clef percussion 
  	    \two-to-fifteen |
  	  }
  	  \new DrumStaff \with {
  				% \remove Bar_engraver
  	    drumStyleTable = #percussion-style
  	    \override StaffSymbol.line-count = #1
  	  } \drummode {
  	    \clef percussion
  	    \one-to-eleven 
  	  }
  	  \new DrumStaff \with {
  				% \remove Bar_engraver
  	    drumStyleTable = #percussion-style
  	    \override StaffSymbol.line-count = #1
  	  } \drummode {
  	    \clef percussion 
  	    \four-to-twentyf 
  	  }
  	  \new DrumStaff \with {
  				% \remove Bar_engraver
  	    drumStyleTable = #percussion-style
  	    \override StaffSymbol.line-count = #1
  	  } \drummode {
  	    \clef percussion 
  	    \three-to-sixteen |
  	  }
  	  \new DrumStaff \with {
  				% \remove Bar_engraver
  	    drumStyleTable = #percussion-style
  	    \override StaffSymbol.line-count = #1
  	  } \drummode {
  	    \clef percussion 
  	    \one-to-ten | s1
  	  }
  	  \new Staff {
  	    \clef bass c,1\mp~ c,4
  	    }
  	  
  	>>
  	 >>
        }
        \layout{}
        
#+end_src

#+RESULTS: drum_funct
[[file:output/beatingA.png]]

#+begin_src shell :var lily=drum_funct :dir /Volumes/Freedom/Dropbox/Music/pieces/historic_studio/score/output
  lilypond --svg intro.ly
#+end_src

#+RESULTS:

** original pitches
- 75/56   
- 98/75      
- 5/3      
- 5/4      
- 4/3    
- 15/8   
- 21/16
- 7/4      
- 3/2

*** Print pitches
#+call: main_funt()

#+name: pitch_list
#+begin_src lilypond :file output/pitches.png
  pitch_list = {
    \accidentalStyle "dodecaphonic"
    \fixed c' {
      a, ^"1/1"
      csoaa ^"5/4"  
      doba^"98/75"
      doba^"21/16"
      d^"4/3"  
      doba^"75/56" 
      e^"3/2"  
      fsoaa ^"5/3"  
      goba^"7/4"  
      gsoaa^"15/8"
      a ^"2/1"
    }
  }
#+end_src

*** Rhythms
To find the rhythm from the difference between two tones, do:

$f = (i_1 - i_2)*R$
$1 / f/1$

where $R$ = root and $f$ is the frequency of the difference

Or, in the example 98/75 - 21/16:
(exact->inexact(- (* 261.6 98/75) (* 261.6 21/16)))

#+begin_src scheme
  (exact->inexact (* (- 21/16 98/75) 261.6))
#+end_src

#+RESULTS:
: 1.5260000000000002

#+begin_src scheme
  (/ 1 152/100)
#+end_src

#+RESULTS:
: 25/38

25:38 can be simplified as 25:16 or 13:8

**** beatingA

#+call: main_funct()

Short for 98/75 against 21/16. Slow pattern beating at 1.526 Hz which can be abbreviated to 25/16 (1.5625).
#+name: rhythm_a
#+begin_src lilypond  :file output/rhythma.png
  beatingA = {
    \tempo 4 = 60
    \time 4/4
    \relative c {
      \tuplet 25/16 {
        \override NoteHead.style = #'triangle
        \clef bass
        a4-\markup \mysans "98/75 against 21/16" a a a
        a a a a
        a a a a
        a a a a
        a a a a
        a a a a
        a } |
    }
  }
#+end_src

#+RESULTS: rhythm_a
[[file:output/rhythms.png]]
**** beatingB

#+call: main_funct()


Short for 21/16 against 4/3. Pattern at 5.45053 Hz which can be roughly abbreviated to 5/4

Reduction of the 5.43053 Hz pattern to match five agings four based on $1/5.45053 = 0.1834$ which is close to 5 beats per second which equals 5/4.

#+name: rhythm_b
#+begin_src lilypond :file output/rhythmb.png
  beatingB = {
    \tempo 4 = 60
    \time 4/4
    \relative c {
      \tuplet 5/4 {
        \override NoteHead.style = #'triangle
        \clef bass
        \override Score.TextMark.font-family = #'sans
        a8_\markup \mysans "21/16 against 4/3" a a a a
        a a a a a
      } |
    }
  }
#+end_src

Slightly more refined version. Given that the difference between 21/16 and 4/3 is 5.43053 when the root is 261.6Hz, and the difference is reduced to one decimal, a version of the ratio can be derived from, given a reduction of 5.43053 to 5.4:

#+begin_src scheme
  (inexact->exact (/ 1 54/10))
#+end_src

#+RESULTS:
: 5/27

#+name: rhythm_bb
#+begin_src lilypond :file output/rhythmb.png
  beatingBB = {
    \tempo 4 = 60
    \time 5/4
    \relative c {
      \tuplet 27/10 {
        \override NoteHead.style = #'triangle
        \clef bass
        \override Score.TextMark.font-family = #'sans
        a8_\markup \mysans "21/16 against 4/3" a a a a
        a a a a a
        a a a a a
        a a a a a
        a a a a a
        a a
      } |
    }
  }
#+end_src
**** beatingC

Short for 5/4 against 98/75. The difference amounts to 14.8254 Hz. $1/14.8254 = 0.067458057$ and $1 / 148/100 = 25/37$

#+begin_src scheme
  (/ 1 148/100)
#+end_src

#+RESULTS:
: 25/37

25:37 may be simplified to 5:7

#+name: rhythm_c
#+begin_src lilypond :file output/rhythmb.png
  beatingC = {
    \tempo 4 = 60
    \time 5/8
    \relative c {
      \tuplet 7/5 {
        \override NoteHead.style = #'triangle
        \clef bass
        \override Score.TextMark.font-family = #'sans
        a32_\markup \mysans "5/4 against 98/75" a a a a a a }
      \tuplet 7/5 {
        a a a a a a a }
      \tuplet 7/5 {
        a a a a a a a }
      \tuplet 7/5 {
        a a a a a a a }
      \tuplet 7/5 {
        a a a a a a a }
      \tuplet 7/5 {
        a a a a a a a 
        
      } |
    }
  }
#+end_src
**** beatingC

Short for 5/4 against 98/75. The difference amounts to 14.8254 Hz. $1/14.8254 = 0.067458057$ and $1 / 148/100 = 25/37$

#+begin_src scheme
  (/ 1 148/100)
#+end_src

#+RESULTS:
: 25/37

25:37 may be simplified to 5:7

#+name: rhythm_c
#+begin_src lilypond :file output/rhythmb.png
  beatingC = {
    \tempo 4 = 60
    \time 5/8
    \relative c {
      \tuplet 7/5 {
        \override NoteHead.style = #'triangle
        \clef bass
        \override Score.TextMark.font-family = #'sans
        a32_\markup \mysans "5/4 against 98/75" a a a a a a }
      \tuplet 7/5 {
        a a a a a a a }
      \tuplet 7/5 {
        a a a a a a a }
      \tuplet 7/5 {
        a a a a a a a }
      \tuplet 7/5 {
        a a a a a a a }
      \tuplet 7/5 {
        a a a a a a a 
        
      } |
    }
  }
#+end_src
* 5,7 limit harmonic space
** pitches in a 5, 7 harmonic space grid
|       <c>       |       <c>       |       <c>       |       <c>       |       <c>       |
|                 |                 | $\frac{49}{32}$ |                 |                 |
|                 |                 |                 |                 |                 |
|                 |  $\frac{7}{5}$  |  $\frac{7}{4}$  | $\frac{35}{32}$ |                 |
|                 |                 |                 |                 |                 |
| $\frac{32}{25}$ |  $\frac{8}{5}$  |  $\frac{1}{1}$  |  $\frac{5}{4}$  | $\frac{25}{16}$ |
|                 |                 |                 |                 |                 |
|                 | $\frac{64}{35}$ |  $\frac{8}{7}$  | $\frac{40}{21}$ |                 |
|                 |                 |                 |                 |                 |
|                 |                 | $\frac{64}{49}$ |                 |                 |
** in notation

Function for eh-printer

#+begin_src scheme
  (eh-printer '(1/1 35/32 8/7 5/4 32/25 64/49 7/5 49/32 25/16 8/5 7/4 64/35 40/21) #t -0)
#+end_src

#+begin_src lilypond :file 5-7-space-scale.png
  \version "2.24"
  \include "ekme-heji.ily"

  #(define-markup-command (mysans layout props m) (markup?)
    (interpret-markup layout props
     #{ \markup \box \sans #m #}))

  #(define-markup-command (nobox layout props m) (markup?)
    (interpret-markup layout props
     #{ \markup \sans \tiny #m #}))

  music = {
    \override Score.NonMusicalPaperColumn.padding = #3
    \accidentalStyle "dodecaphonic"
    \override Score.BarLine.stencil = ##f
    \override Staff.TimeSignature.stencil = ##f
    \fixed c' {
      c^\markup \mysans "1/1"_\markup \nobox "+-0" 
      duaaoba^\markup \mysans "35/32"_\markup \nobox "-45" 
      doba^\markup \mysans "8/7"_\markup \nobox "31" 
      eoaa^\markup \mysans "5/4"_\markup \nobox "-14" 
      euaa^\markup \mysans "32/25"_\markup \nobox "27" 
      fubb^\markup \mysans "64/49"_\markup \nobox "-38" 
      fsoba^\markup \mysans "7/5"_\markup \nobox "-18" 
      guba^\markup \mysans "49/32"_\markup \nobox "37" 
      gsoab^\markup \mysans "25/16"_\markup \nobox "-28" 
      gsuaa^\markup \mysans "8/5"_\markup \nobox "13" 
      asoba^\markup \mysans "7/4"_\markup \nobox "-32" 
      bsuab^\markup \mysans "64/35"_\markup \nobox "44" 
      boaauba^\markup \mysans "40/21"_\markup \nobox "15" 
      c'2.^\markup \mysans "2/1"_\markup \nobox "+-0" 
    }
  }

  \score {
    \new Staff {
      \new Voice {
        \music
      }
    }
    \layout{}
  				%    \midi{}
  }
#+end_src

#+RESULTS:
Q[[file:5-7-space-scale.png]]
** sounds
:PROPERTIES:
:header-args: :var gfreq=261.1
:header-args: :noweb yes
:END:
The first seven intervals are calculated based on the root 200Hz. The piece however has it's root at middle C, or 261.6. This means that the general tempo should be set at $(261.6/200)*60$ which gives 78.48BPM

*** 1- 32/25 against 5/4

#+begin_src scheme :var freq=200 R1='32/25' R2='5/4'
  (/ 1 freq (- R1 R2))
#+end_src

#+RESULTS:
: 100/783
#+name: one_to_six
#+begin_src lilypond
  one-to-six = {
    \relative c {
      \override Score.NonMusicalPaperColumn.padding = #3
      \override TupletNumber.text = #tuplet-number::calc-fraction-text
      \tuplet 6/8 {
        \override NoteHead.style = #'triangle
        a16\ff
        ^\markup \mysans "32/25 against 5/4"
        a a a a a
      }
      \tuplet 6/8 {
        \override NoteHead.style = #'triangle
        a a a a a a | 
      }
    }
  }
#+end_src
*** 2- 8/5 against 25/16 
Two kinds of minor sixths beating at a slow frequency (9.1809 beats/second)

#+begin_src scheme :var freq=200 R1='8/5' R2='25/16'
  (/ 1 freq (- R1 R2))
#+end_src

#+RESULTS:
: 2/15
#+name: two_to_fifteen
#+begin_src lilypond
  two-to-fifteen = {
    \relative c {
      \override Score.NonMusicalPaperColumn.padding = #3
      \override TupletNumber.text = #tuplet-number::calc-fraction-text
      \tuplet 7/8 {
        \override NoteHead.style = #'triangle
        a16\ff^\markup \mysans "8/5 against 25/16" a a a a a a
      }
      \tuplet 7/8 {
        \override NoteHead.style = #'triangle
        a16 a a a a a a
      }
    }
  }
#+end_src

*** 3- 64/49 against 5/4

#+begin_src scheme :var freq=200 R1='64/49' R2='5/4'
  (+ (/ 1 freq (- R1 R2)) 1/550)
#+end_src

#+RESULTS:
: 1/11
#+name: one_to_eleven
#+begin_src lilypond
  one-to-eleven = {
    \relative c {
      \override Score.NonMusicalPaperColumn.padding = #3
      \override TupletNumber.text = #tuplet-number::calc-fraction-text
      \override TextSpanner.style = #'line
      \override TextSpanner.Y-offset = #4
      \tuplet 11/16 {
        \override NoteHead.style = #'triangle
        a16\ff
        ^\markup \mysans "64/49 against 5/4"
        ^\markup \sans "[80.00'']"
        \startTextSpan
        a a a
        a a a a
        a a a |}
      \tuplet 11/16 {
        a16 a a a
        a\> a a a
        a a a
      }
      \tuplet 11/16 {
        a16 a a a
        a a a a
        a a a\!\stopTextSpan
      }
    }
  }
#+end_src

*** 4- 25/16 against 49/32
Two kinds of minor sixths beating at a slow frequency (9.1809 beats/second)

#+begin_src scheme :var freq=200 R1='25/16' R2='49/32'
  (/ 1 freq (- R1 R2))
#+end_src

#+RESULTS:
: 4/25
#+name: four_to_twentyf
#+begin_src lilypond
  four-to-twentyf = {
    \relative c {
      \override Score.NonMusicalPaperColumn.padding = #3
      \override TupletNumber.text = #tuplet-number::calc-fraction-text
      \tuplet 25/16 {
        \override NoteHead.style = #'triangle
        a4\ff^\markup \mysans "25/16 against 49/32" a a a a a a16~ } |
      \tuplet 25/16 {
        a8.\> a4 a4 a4 a4 a4 a8 \!|
        
      }
    }
  }
#+end_src

*** 5- 64/49 against 32/25
The difference between $64/49$, the /supersupermajer third/, which is the sum of two major seconds $8/7$ and the slightly smaller, /classical diminished fourth/ $32/25$ results in the proportion $49/256 \approx 3/16$

#+begin_src scheme :var freq=200 R1='64/49' R2='32/25' :eval never-export
  (/ 1 freq (- R1 R2))
#+end_src

#+RESULTS:
: 49/256



#+name: three_to_sixteen
#+begin_src lilypond  :eval never-export
    three-to-sixteen = {
      \relative c {
        \override Score.NonMusicalPaperColumn.padding = #3
        \override TupletNumber.text = #tuplet-number::calc-fraction-text
        \override NoteHead.style = #'triangle
        a8.\ff^\markup \mysans "64/49 against 32/25" a16~ a8 a8~ a16 a8. a8. a16~ |
        a8\> a8~ a16 a8. a8.\! r16 r4 |
      }
      
    }
#+end_src

*** 6- 8/7 against 35/32 
The difference between $8/7$, the /super major second/, and $35/32$ the /septimal neutral second/ (which is the interval between the $8/7$ and the $5/4$) and it results in the proportion $28/275 \approx 1/10$

#+begin_src scheme :var freq=200 R1='8/7' R2='35/32' :eval never-export
  (/ 1 freq (- R1 R2))
#+end_src

#+RESULTS:
: 28/275

#+name: one_to_ten
#+begin_src lilypond  :eval never-export
  one-to-ten = {
    \relative c {
      \override Score.NonMusicalPaperColumn.padding = #3
      \override TupletNumber.text = #tuplet-number::calc-fraction-text
      \override NoteHead.style = #'triangle
      \tuplet 10/16 {
        a16\ff^\markup \mysans "8/7 against 35/32" a a a a a a a a a }
    }
  }

#+end_src

*** 7- 2/1 against 40/21
Quick beating, but interval together with reinforced beat makes a nice phasing effect

#+begin_src scheme :var freq=200 R1='2/1' R2='40/21'
  (/ 1 freq (- R1 R2))
#+end_src

#+RESULTS:
: 21/400
*** first interval #5

#+begin_src scheme :var freq=261.6 R1='25/16' R2='49/32' T=60
  (exact->inexact (* (/ 1 gfreq (- R1 R2)) T))
#+end_src

#+RESULTS:
: 7.353504404442742
#+name: section_one
#+begin_src lilypond :file output/section_1.png :tangle output/section_1.ly
  <<stuff>>
    
    music = {
      \relative c' {
        \mark \markup \sans "[7.35'']"
        <
          eoaa
          euaa
        >1\fermata
        _\markup \mysans "5/4"
        _\markup \nobox "(-14)"
        ^\markup \mysans "32/25"
        ^\markup \nobox "(27)"      
      }
    }

    <<main_funct>>
#+end_src

#+RESULTS: section_one
[[file:output/section_1.png]]

*** second interval #1 
Time for the second section based on:

#+begin_src scheme :var freq=261.6 R1='64/49' R2='32/25' T=60
  (exact->inexact (* (/ 1 gfreq (- R1 R2)) T))
#+end_src

#+RESULTS:
: 8.796916890080427

#+name: section_two
#+begin_src lilypond :file output/section_2.png :tangle output/section_2.ly
  <<stuff>>
    
    music = {
      \relative c' {
        \mark \markup \sans "[8.79'']"
        <
    	fubb
    	euaa
        >1\fermata
        ^\markup \mysans "64/49"
        ^\markup \nobox "(-38)"
        _\markup \mysans "32/25"
        _\markup \nobox "(27)"      
      }
    }
    <<main_funct>>
#+end_src

#+RESULTS: section_two
[[file:output/section_2.png]]

*** third interval #3 
Time for the second section based on:

#+begin_src scheme :var freq=261.6 R1='64/49' R2='5/4' T=60
  (exact->inexact (* (/ 1 freq (- R1 R2)) T))
#+end_src

#+RESULTS:
: 4.08673894912427

#+name: section_three
#+begin_src lilypond :file output/section_3.png :tangle output/section_3.ly
  <<stuff>>
    
    music = {
      \relative c' {
        \mark \markup \sans "[4.08'']"
        <
    	fubb
    	eoaa
        >1\fermata
        _\markup \mysans "5/4"
        _\markup \nobox "(-14)"
        ^\markup \mysans "64/49"
        ^\markup \nobox "(-38)"
      }
    }
    <<main_funct>>
#+end_src

#+RESULTS: section_three
[[file:output/section_3.png]]

*** paus
#+name: paus
#+begin_src lilypond :file output/paus.png :tangle output/paus.ly
  <<stuff>>
    
    music = {
      \relative c' {
        \override Staff.Clef.transparent = ##t
        r1
      }
    }
    <<main_funct>>
#+end_src

#+RESULTS: paus
[[file:output/paus.png]]

*** second interval with beat #1

The difference between $64/49$, the /supersupermajer third/, which is the sum of two major seconds $8/7$ and the slightly smaller, /classical diminished fourth/ $32/25$ results in the proportion $49/256 \approx 3/16$

#+begin_src scheme :var freq=200 R1='64/49' R2='32/25' :eval never-export
  (/ 1 freq (- R1 R2))
#+end_src

This is Segment C in the score where the beating is complemented with a percussion sound that fades in.
#+name: C_section_with_beat
#+begin_src lilypond :file output/section_2_beat.png :tangle output/section_C_beat.ly
  <<stuff>>
    music = {
      \relative c' {
        \mark \markup \sans "[8.79'']"
        <
    	fubb\laissezVibrer
    	euaa\laissezVibrer
        >1
        ^\markup \mysans "64/49"
        ^\markup \nobox "(-38)"
        _\markup \mysans "32/25"
        _\markup \nobox "(27)"
        \> s4 s8. s16\!
      }
    }
    perc-music = {
      \relative c {
        \override Score.NonMusicalPaperColumn.padding = #3
        \override TupletNumber.text = #tuplet-number::calc-fraction-text
        \override NoteHead.style = #'triangle
        \time 6/4 \bar ".|:" a8.\ppp\< a8. a8. a8. a8. a8. a8. a8. \bar ":|."
        a4\!\fff 
      }
    }
    <<main_funct_two_staffs>>
#+end_src

#+RESULTS: section_two_with_beat
[[file:output/section_2_beat.png]]

*** rhythm 32/25 agains 5/4

#+name: section_two_added_beat
#+begin_src lilypond :file output/section_2_beat_2.png :tangle output/section_2_beat_2.ly
  <<stuff>>
    perc-music = {
      \relative c {
        \override Score.NonMusicalPaperColumn.padding = #3
        \override TupletNumber.text = #tuplet-number::calc-fraction-text
        \tuplet 6/8 {
  	\override NoteHead.style = #'triangle
  	\bar ".|:" a16\pp\< a a a a a
        }
        \tuplet 6/8 {
  	\override NoteHead.style = #'triangle
  	a a a a a a \!\mf \bar ":|." 
        }
      }
    }
    <<main_funct_single_drum>>
#+end_src

#+RESULTS: section_two_added_beat
[[file:output/section_2_beat_2.png]]
*** Segment C 64/49 against 32/25
The difference between $64/49$, the /supersupermajer third/, which is the sum of two major seconds $8/7$ and the slightly smaller, /classical diminished fourth/ $32/25$ results in the proportion $49/256 \approx 3/16$

#+begin_src scheme :var freq=200 R1='64/49' R2='32/25' :eval never-export
  (/ 1 freq (- R1 R2))
#+end_src

#+RESULTS:
: 49/256

#+name: eleven_to_sixteen
#+begin_src lilypond :eval never-export :tangle output/segmant_c.ly
    <<stuff>>
      music = {
        \relative c' {
          \mark \markup \sans "[8.79'']"
          <
      	fubb\laissezVibrer
      	euaa\laissezVibrer
          >1
          ^\markup \mysans "64/49"
          ^\markup \nobox "(-38)"
          _\markup \mysans "32/25"
          _\markup \nobox "(27)"
          \> s4 s8. s16\!
        }
      }
      perc-music = {
   %% ".|:" a8. a8. a8. a8. a8. a8. a8. a8. \bar ":|."
      \relative c {
        \override Score.NonMusicalPaperColumn.padding = #3
        \override TupletNumber.text = #tuplet-number::calc-fraction-text
        \override TextSpanner.style = #'line
        \override TextSpanner.Y-offset = #4
        \tuplet 11/16 {
          \override NoteHead.style = #'triangle
          ".|:" a16\ff\>
          a a a
          a a a a
          a a a\! ":|."
        }
      }
      <<main_funct>>
#+end_src



